<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="UTF-8">
		<title> PlayList page </title>
		<link rel="stylesheet" type="text/css" media="all" href="../CSS/mystyle.css" th:href="@{/CSS/mystyle.css}" />
	</head>
	
	<body>
		<h2> PlayList <span th:text="${playlist.title}">PlayList1</span></h2>
		<h3>Hope you will have a good experience with us <span th:text="${user.userName}">Mario</span></h3>
		<br>
		
		<div th:if="${#lists.isEmpty(songsInPlaylist)}">
			<div th:if="(${block} == 0)">
				This playList doesn't have songs yet
			</div>
			<div th:if="(${block} > 0)">
				This section is free
			</div>
		</div>
		<div th:if="${not #lists.isEmpty(songsInPlaylist)}">
			<table class=songsTable>
				<tbody>
					<tr>
						<td th:each="s : ${songsInPlaylist}">
							<table class=simpleTable>
								<tbody>
									<tr>
										<td>
											<!-- <img th:src="@{${s.imgFile}}"/>  --> 
											<!-- <img src="data:image/png;base64,base64_encode(${s.imageblob})"/> -->
											<!-- <img th:src="'data:image/png;base64,'+ ${s.imgFile}" /> -->
											<!-- <img th:src="'data:image/png;base64,'+ ${s.imgFile}" /> -->
											<!-- <img th:src='"GetImage/" + th:text="@{${s.imgFile}}"' height=100 width=100 /> -->
											<img th:src="@{GetImage/{image}(image=${s.imgFile})}" />
										</td>
									</tr>
									<tr>
										<td>
											<a th:href="@{GoToSongPage(songId=${s.id})}">
											<span th:text="${s.songTitle}"></span></a>
										</td>
									</tr>
								</tbody>
							</table>
						</td>		
					</tr>
				</tbody>
			</table>
			
			<div th:if="(${block} > 0)">
				<a th:href="@{GoToPlayListPage(playlistId=${playlist.id} , section=(${block} - 1))}">Before</a>
			</div>
			<div th:if="(${next} == true)">
				<a th:href="@{GoToPlayListPage(playlistId=${playlist.id} , section=(${block} + 1))}">Next</a>
			</div>
			
		</div>	
		<p th:class = "error" th:text="${errorMsg1}"></p>
		<br><br>
	
		<div th:if="${#lists.isEmpty(songsNotInPlaylist)}">
				All songs already in this playList
		</div>
		<div th:if="${not #lists.isEmpty(songsNotInPlaylist)}">
			<fieldset>
				Add a song to this playList
				<form th:action="@{/AddSong(playlistId=${playlist.id})}" method="POST">
					<select id="song" name="song">
						<option th:each="s : ${songsNotInPlaylist}"  th:value="${s.id}"
									th:text="${s.songTitle}">song</option>
					</select>
					<p><input type="submit" value="submit"></p>
					<p th:class = "error" th:text="${errorMsg}"></p>
				</form>
			</fieldset>
		</div>
		
		<br><br><br>
		
		<div>
			<a th:href="@{GoToHomePage}">Home page</a>
		</div>
	
	</body>
	
</html>






